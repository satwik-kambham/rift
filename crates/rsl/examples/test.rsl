# If-else statements
let x = 10
if x > 15 {
    print("x is greater than 15")
} else {
    print("x is less than or equal to 15")
}

let y = 5
if y > 10 {
    print("y is greater than 10")
} else if y > 5 {
    print("y is greater than 5 but not greater than 10")
} else {
    print("y is less than or equal to 5")
}

let z = 7
if z > 10 {
    print("z > 10")
} else if z > 8 {
    print("z > 8")
} else if z > 5 {
    print("z > 5")
} else {
    print("z <= 5")
}

# Nested if-else
let a = 3
if a > 10 {
    print("a > 10")
} else {
    if a > 5 {
        print("a > 5")
    } else {
        print("a <= 5")
    }
}

# Primitive data types
print(null) # Null
print(true, false) # Boolean
print("String") # String
print(16, 16.5, -0.5) # Number

# Variables
print(x) # Null by default

let x = 5
print(x)
# Except functions, arrays and tables everything else is cloned when passed around
let y = x
y = y + 1
print(x, y)

# Functions
# Functions are stored as variables
# Functions are not duplicated when passed around

fn square(a) {
    return a * a
}

print(square, square(4))

let sqr = square
print(sqr, sqr(5))

# Array
let arr = createArray(9, 8, 7)
print(arr, arrayLen(arr))
print(arrayGet(arr, 1), arrayGet(arr, 3))

# Indexing (read + write)
let i = 0
arr[i] = arr[i + 1] * 5
print("Indexed arr:", arr, arr[i])

let nested = createArray(
    createArray(1, 2, 3),
    createArray(4, 5, 6)
)
nested[0][1] = nested[1][2] * 10
print("Nested index:", nested, nested[0][1])

fn applyArray(arr, fun) {
    let i = 0
    loop {
        if i >= arrayLen(arr) { break }
        let item = arrayGet(arr, i)
        arraySet(arr, i, fun(item))
        i = i + 1
    }
}

applyArray(arr, sqr)
print(arr)

let multiDimArr = createArray(
    createArray(1, 2, 3),
    createArray(4, 5, 6),
    createArray(7, 8, 9),
    createArray(0),
    null,
    "Hello"
)

print(multiDimArr)

# Tables

let table = createTable()
tableSet(table, "name", "Satwik")
tableSet(table, "age", -56)
tableSet(table, "isStudent", false)

# Get values
let name = tableGet(table, "name")
let age = tableGet(table, "age")
let isNotStudent = tableGet(table, "isNotStudent")

# Print values
print(table)
print("Name:", name)
print("Age:", age)
print("Is Not Student:", isNotStudent)

# Indexing (table)
table["name"] = "Rift"
print("Table name:", table["name"])

# Get all keys
let keys = tableKeys(table)
print("Keys:", keys)

fn addBase(self, x) {
    return self["base"] + x
}

let methodTable = createTable()
methodTable["base"] = 10
methodTable["fun"] = addBase
print("Method call:", methodTable.fun(5))

let innerTable = createTable()
innerTable["base"] = 7
innerTable["fun"] = addBase
let outerTable = createTable()
outerTable["inner"] = innerTable
print("Nested method call:", outerTable["inner"].fun(5))

let testLib = import("lib.rsl")
print(testLib)
